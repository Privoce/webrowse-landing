"use strict";(self.webpackChunkwebrowse_landing=self.webpackChunkwebrowse_landing||[]).push([[347],{3347:function(e,n,t){t.r(n),t.d(n,{default:function(){return c}});var r=t(8634),a=t(2656),u=t.n(a),s=t(7294),o=t(5566),i=t(3941);function c(e){var n=e.priceId,t=void 0===n?null:n,a=e.user,c=e.txt,l=void 0===c?"Start 14-day free trial":c,f=(0,s.useState)(!1),p=f[0],d=f[1],h=(0,s.useState)(null),b=h[0],m=h[1],v=(0,s.useState)(!1),g=v[0],w=v[1];(0,s.useEffect)((function(){m(a)}),[a]);var k=function(){var e=(0,r.Z)(u().mark((function e(n){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getCurrentUser();case 2:t=e.sent,console.log({currUser:t}),t&&(w(!1),m(t));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=function(){var e=(0,r.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("login",{user:n}),m(n),w(!1);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=function(){var e=(0,r.Z)(u().mark((function e(){var n,r,a,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=3;break}return w(!0),e.abrupt("return");case 3:if(t){e.next=5;break}return e.abrupt("return");case 5:return n=b.id,r=b.username,a=b.email,d(!0),e.next=9,fetch("http://localhost:4000/subscription/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:t,user:{id:n,username:r,email:a}})});case 9:return s=e.sent,e.next=12,s.json();case 12:o=e.sent,d(!1),o&&o.session_url&&(location.href=o.session_url);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.createElement(s.Fragment,null,s.createElement(o.AuthingGuard,{visible:g,onRegisterInfoCompleted:function(e){m(e),w(!1)},onClose:function(){w(!1)},onLogin:x,onLoad:k,appId:i.Jf,config:i.ZP}),s.createElement("button",{disabled:p,className:"btn",onClick:y},p?"Initialing":l))}}}]);
//# sourceMappingURL=347-df23b96ecd67d7b7f338.js.map