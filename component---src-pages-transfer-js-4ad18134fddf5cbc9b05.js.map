{"version":3,"file":"component---src-pages-transfer-js-4ad18134fddf5cbc9b05.js","mappings":"6OAIMA,EAAYC,EAAAA,QAAAA,QAAAA,WAAH,+DAAGA,CAAH,uXAgCTC,EAAS,SAAC,GAAD,IAAGC,EAAH,EAAGA,SAAH,OACX,gBAACH,EAAD,KACI,uBAAKI,UAAU,QACX,uBACIC,IAAI,gBACJC,IAAI,oEAGXH,IAIM,SAASI,IACpB,OAA0CC,EAAAA,EAAAA,WAAS,GAA5CC,EAAP,KAAsBC,EAAtB,KACA,GAAsBF,EAAAA,EAAAA,UAAS,IAAxBG,EAAP,KAAYC,EAAZ,KACQC,GAAeC,EAAAA,EAAAA,YAAW,CAC9BC,MAAAA,EAAAA,GACAC,QAASC,EAAAA,GAAAA,UAFLJ,WA2BR,OAtBAK,EAAAA,EAAAA,YAAU,WACN,IAAMC,EAAI,mCAAG,2FACLC,EAAM,IAAIC,gBAAgBC,SAASC,QAAQC,IAAI,KAC/CC,EAAM,IAAIJ,gBAAgBC,SAASC,QAAQC,IAAI,MAC/CJ,EAHK,iCAIYP,EAAWa,iBAJvB,QAIDC,EAJC,SAODC,SAASC,cAAc,IAAIC,YAAY,sBAAuB,CAAEC,OAAQ,CAAEJ,KAAAA,MAE9EC,SAASC,cAAc,IAAIC,YAAY,sBAAuB,CAAEC,OAAQ,CAAEX,IAAAA,EAAKK,IAAAA,MAE/EH,SAASU,KArBN,0BAUE,wBAaLpB,EAAO,4CAA4CQ,GAb9C,QAeTV,GAAiB,GAfR,4CAAH,qDAiBVS,MACD,IAGCV,EAEI,gBAACP,EAAD,KACI,uBAAKE,UAAU,OAAf,sBAIRO,EAEI,gBAACT,EAAD,KACI,uBAAKE,UAAU,aAAaO,IAGjC","sources":["webpack://webrowse-landing/./src/pages/transfer.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useAuthing } from '@authing/react-ui-components';\nimport { appId, GuardConfig } from '../constants/guardConfig';\nconst StyledTip = styled.section`\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  .logo {\n    width: 80px;\n    height: 80px;\n    padding: 4px;\n    border-radius: 50%;\n    border: 1px solid #eee;\n    margin-bottom: 20px;\n    img {\n      width: 100%;\n      height: 100%;\n    }\n  }\n  .txt {\n    color: #555;\n    padding: 40px;\n    line-height: 1.4;\n    font-size: 34px;\n    font-weight: 800;\n    white-space: pre-line;\n    word-break: break-all;\n    &.error {\n      color: red;\n    }\n  }\n`;\nconst Result = ({ children }) => (\n    <StyledTip>\n        <div className=\"logo\">\n            <img\n                alt=\"Webrowse Logo\"\n                src=\"https://static.nicegoodthings.com/works/vera/webrowse.logo.png\"\n            />\n        </div>\n        {children}\n    </StyledTip>\n);\nconst LandingUrl = 'https://webrow.se#howto';\nexport default function WebrowseTransfer() {\n    const [checkingLogin, setCheckingLogin] = useState(true)\n    const [tip, setTip] = useState('');\n    const { authClient } = useAuthing({\n        appId,\n        appHost: GuardConfig.appHost\n    });\n\n    useEffect(() => {\n        const init = async () => {\n            let rid = new URLSearchParams(location.search).get('r');\n            let wid = new URLSearchParams(location.search).get('w');\n            if (rid) {\n                let user = await authClient.getCurrentUser();\n                if (user) {\n                    // 把用户信息同步到webrowse扩展\n                    document.dispatchEvent(new CustomEvent('WEBROWSE_ROOM_EVENT', { detail: { user } }));\n                }\n                document.dispatchEvent(new CustomEvent('WEBROWSE_ROOM_EVENT', { detail: { rid, wid } }));\n                // 注入成功\n                location.href = LandingUrl;\n            } else {\n                setTip(`Webrowse Transfer URL params error: \\n\\r ${rid}`);\n            }\n            setCheckingLogin(false)\n        };\n        init();\n    }, []);\n\n    // 暂未检测\n    if (checkingLogin) {\n        return (\n            <Result>\n                <div className=\"txt\">Checking Webrowse</div>\n            </Result>\n        );\n    }\n    if (tip)\n        return (\n            <Result>\n                <div className=\"txt error\">{tip}</div>\n            </Result>\n        );\n    return null;\n}"],"names":["StyledTip","styled","Result","children","className","alt","src","WebrowseTransfer","useState","checkingLogin","setCheckingLogin","tip","setTip","authClient","useAuthing","appId","appHost","GuardConfig","useEffect","init","rid","URLSearchParams","location","search","get","wid","getCurrentUser","user","document","dispatchEvent","CustomEvent","detail","href"],"sourceRoot":""}