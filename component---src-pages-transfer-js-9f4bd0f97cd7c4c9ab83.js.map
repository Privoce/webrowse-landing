{"version":3,"file":"component---src-pages-transfer-js-9f4bd0f97cd7c4c9ab83.js","mappings":"iNAKA,MAAMA,EAAYC,EAAAA,QAAOC,QAAOC,WAAA,CAAAC,YAAA,sBAAAC,YAAA,gBAAdJ,CAAc,uXAgC1BK,EAASC,IAAA,IAAC,SAAEC,GAAUD,EAAA,OACxBE,EAAAA,cAACT,EAAS,KACNS,EAAAA,cAAA,OAAKC,UAAU,QACXD,EAAAA,cAAA,OACIE,IAAI,gBACJC,IAAI,oEAGXJ,EACO,EAEVK,EAAa,0BACJ,SAASC,IACpB,MAAMC,GAAQC,EAAAA,EAAAA,OACR,EAACC,EAAc,EAACC,IAAoBC,EAAAA,EAAAA,WAAS,IAC7C,EAACC,EAAI,EAACC,IAAUF,EAAAA,EAAAA,UAAS,IAyB/B,OAvBAG,EAAAA,EAAAA,YAAU,KACOC,WACT,IAAIC,EAAM,IAAIC,gBAAgBC,SAASC,QAAQC,IAAI,KAC/CC,EAAM,IAAIJ,gBAAgBC,SAASC,QAAQC,IAAI,KACnD,GAAIJ,EAAK,CACL,MAAMM,QAAmBf,EAAMgB,gBAC/B,IAAIC,QAAaF,EAAWG,iBACxBD,GAEAE,SAASC,cAAc,IAAIC,YAAY,sBAAuB,CAAEC,OAAQ,CAAEL,WAE9EE,SAASC,cAAc,IAAIC,YAAY,sBAAuB,CAAEC,OAAQ,CAAEb,MAAKK,UAE/EH,SAASY,KAAOzB,CACpB,MACIQ,EAAO,4CAA4CG,GAEvDN,GAAiB,EAAM,EAE3BqB,EAAM,GACP,IAGCtB,EAEIR,EAAAA,cAACH,EAAM,KACHG,EAAAA,cAAA,OAAKC,UAAU,OAAM,sBAI7BU,EAEIX,EAAAA,cAACH,EAAM,KACHG,EAAAA,cAAA,OAAKC,UAAU,aAAaU,IAGjC,IACX,C","sources":["webpack://webrowse-landing/./src/pages/transfer.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useGuard } from '@authing/guard-react'\n\nimport { appId, GuardConfig } from '../constants/guardConfig';\nconst StyledTip = styled.section`\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  .logo {\n    width: 80px;\n    height: 80px;\n    padding: 4px;\n    border-radius: 50%;\n    border: 1px solid #eee;\n    margin-bottom: 20px;\n    img {\n      width: 100%;\n      height: 100%;\n    }\n  }\n  .txt {\n    color: #555;\n    padding: 40px;\n    line-height: 1.4;\n    font-size: 34px;\n    font-weight: 800;\n    white-space: pre-line;\n    word-break: break-all;\n    &.error {\n      color: red;\n    }\n  }\n`;\nconst Result = ({ children }) => (\n    <StyledTip>\n        <div className=\"logo\">\n            <img\n                alt=\"Webrowse Logo\"\n                src=\"https://static.nicegoodthings.com/works/vera/webrowse.logo.png\"\n            />\n        </div>\n        {children}\n    </StyledTip>\n);\nconst LandingUrl = 'https://webrow.se#howto';\nexport default function WebrowseTransfer() {\n    const guard = useGuard()\n    const [checkingLogin, setCheckingLogin] = useState(true)\n    const [tip, setTip] = useState('');\n\n    useEffect(() => {\n        const init = async () => {\n            let rid = new URLSearchParams(location.search).get('r');\n            let wid = new URLSearchParams(location.search).get('w');\n            if (rid) {\n                const authClient = await guard.getAuthClient();\n                let user = await authClient.getCurrentUser();\n                if (user) {\n                    // 把用户信息同步到webrowse扩展\n                    document.dispatchEvent(new CustomEvent('WEBROWSE_ROOM_EVENT', { detail: { user } }));\n                }\n                document.dispatchEvent(new CustomEvent('WEBROWSE_ROOM_EVENT', { detail: { rid, wid } }));\n                // 注入成功\n                location.href = LandingUrl;\n            } else {\n                setTip(`Webrowse Transfer URL params error: \\n\\r ${rid}`);\n            }\n            setCheckingLogin(false)\n        };\n        init();\n    }, []);\n\n    // 暂未检测\n    if (checkingLogin) {\n        return (\n            <Result>\n                <div className=\"txt\">Checking Webrowse</div>\n            </Result>\n        );\n    }\n    if (tip)\n        return (\n            <Result>\n                <div className=\"txt error\">{tip}</div>\n            </Result>\n        );\n    return null;\n}"],"names":["StyledTip","styled","section","withConfig","displayName","componentId","Result","_ref","children","React","className","alt","src","LandingUrl","WebrowseTransfer","guard","useGuard","checkingLogin","setCheckingLogin","useState","tip","setTip","useEffect","async","rid","URLSearchParams","location","search","get","wid","authClient","getAuthClient","user","getCurrentUser","document","dispatchEvent","CustomEvent","detail","href","init"],"sourceRoot":""}