"use strict";(self.webpackChunkwebrowse_landing=self.webpackChunkwebrowse_landing||[]).push([[1026,7248,6722],{1903:function(e,t,n){n.r(t);var a=n(5861),l=n(4687),o=n.n(l),i=n(7294),r=n(77),c=n(7289),u=n(265),d=n(6963),s=n.n(d),p=n(5414);t.default=function(){var e=(0,i.useContext)(r.VoiceContext),t=e.state,n=e.dispatch,l=(0,i.useState)(void 0),d=l[0],v=l[1],m=(0,i.useState)([]),f=m[0],b=m[1],E=(0,i.useRef)(null),g=function(){s().getDevices().then((function(e){b(e),v("allow")})).catch((function(e){var t="denied";switch(!0){case e.toString().indexOf("Permission dismissed")>-1:t="dismissed";break;case e.toString().indexOf("Permission denied")>-1:t="denied"}v(t)}))};(0,i.useEffect)((function(){g()}),[]),(0,i.useEffect)((function(){var e=function(){var e=(0,a.Z)(o().mark((function e(a){var l,i,c,u,d,s,p,v,m;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.data||{},c=i.source,u=i.event,d=i.payload,"webrowse.ext"===c){e.next=3;break}return e.abrupt("return");case 3:e.t0=u,e.next="webrowse_users"===e.t0?6:"leave"===e.t0?11:"join"===e.t0?13:"mute"===e.t0?15:19;break;case 6:return s=(null==d?void 0:d.users)||[],p=(null==d?void 0:d.currentUser)||{},n({type:r.UPDATE_CURRENT_USR,payload:p}),n({type:r.UPDATE_EXT_USERS,payload:s}),e.abrupt("break",20);case 11:return n({type:r.LEAVE}),e.abrupt("break",20);case 13:return"complete"===(null==t?void 0:t.permissionState)?n({type:r.UPDATE_STATUS,payload:"will-join"}):null==E||null===(l=E.current)||void 0===l||l.join(),e.abrupt("break",20);case 15:return v=null==d?void 0:d.type,m="video"===v?null==t?void 0:t.videoEnabled:null==t?void 0:t.audioEnabled,n({type:r.UPDATE_DEVICES_ENABLED,payload:{devices:v,enabled:!m}}),e.abrupt("break",20);case 19:return e.abrupt("break",20);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}),[null==t?void 0:t.permissionState,null==t?void 0:t.videoEnabled,null==t?void 0:t.audioEnabled]),(0,i.useEffect)((function(){void 0!==d&&(null==n||n({type:r.UPDATE_PERMISSION_STATE,payload:d}))}),[d]);var h=(t||{}).permissionState;return console.log(h,"permissionState"),void 0===h?null:i.createElement(i.Fragment,null,i.createElement(p.q,{bodyAttributes:{class:"view-voice"}}),"complete"===h?i.createElement(c.default,null):i.createElement(u.default,{ref:E,devices:f,access:g}))}},1722:function(e,t,n){n.r(t);var a=n(7294),l=n(3806),o=n(9390),i=l.default.div.withConfig({displayName:"Selector__StyledSelector",componentId:"sc-8ljg19-0"})([".selector{width:380px;padding:0 12px;box-sizing:border-box;border:1px solid rgba(208,213,221,1);border-radius:8px;display:flex;align-items:center;}.icon{}.selectMain{position:relative;width:100%;flex:1;margin:0 6px;}.select{width:100%;height:44px;opacity:0;cursor:pointer;}.value{position:absolute;line-height:44px;font-size:16px;color:rgba(52,64,84,1);}"]);t.default=function(e){var t,n=e.icon,l=void 0===n?null:n,r=e.data,c=void 0===r?[]:r,u=e.value,d=void 0===u?"default":u,s=e.onChange,p=void 0===s?function(){}:s;return a.createElement(i,null,a.createElement("div",{className:"selector"},l,a.createElement("div",{className:"selectMain"},a.createElement("div",{className:"value"},a.createElement("span",{className:"textLineClamp-1"},null===(t=c.find((function(e){return e.deviceId===d})))||void 0===t?void 0:t.label)),a.createElement("select",{className:"select",onChange:function(e){console.log(e.target.value,"ev"),p(e.target.value)}},null==c?void 0:c.map((function(e){return a.createElement("option",{key:e.deviceId,value:e.deviceId},e.label)})))),a.createElement(o.DropDown,null)))}},265:function(e,t,n){n.r(t);var a=n(5861),l=n(4687),o=n.n(l),i=n(7294),r=n(4778),c=n(1722),u=n(9390),d=n(77),s=n(881),p=n(6963),v=n.n(p),m=n(7707),f=function(e,t){var n=e.devices,l=void 0===n?[]:n,p=e.access,f=void 0===p?function(){}:p,b=(0,i.useRef)(null),E=(0,i.useContext)(d.VoiceContext),g=E.state,h=E.dispatch,x=(0,i.useState)(""),y=x[0],w=x[1],k=(0,i.useState)(""),S=k[0],C=k[1],I=(0,i.useState)(""),N=I[0],_=I[1],T=(0,i.useState)(null),D=T[0],A=T[1],U=(0,i.useState)(null),P=U[0],M=U[1],V=(0,i.useState)(0),L=V[0],R=V[1],j=null==g?void 0:g.permissionState,z=g||{},B=z.videoEnabled,O=z.audioEnabled;(0,i.useEffect)((function(){var e,t,n,a=null===(e=l.find((function(e){return"audioinput"===e.kind})))||void 0===e?void 0:e.deviceId;w(a);var o=null===(t=l.find((function(e){return"audioinput"===e.kind})))||void 0===t?void 0:t.deviceId;C(o);var i=null===(n=l.find((function(e){return"videoinput"===e.kind})))||void 0===n?void 0:n.deviceId;_(i)}),[l]),(0,i.useEffect)((function(){var e,t;if(y&&N)return(0,a.Z)(o().mark((function n(){var a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v().createMicrophoneAndCameraTracks({microphoneId:y},{cameraId:N});case 2:a=n.sent,e=a[0],t=a[1],A(e),M(t),b=setInterval((function(){var t,n=null===(t=e)||void 0===t?void 0:t.getVolumeLevel();console.log("local stream audio level",n),R(n)}),200);case 8:case"end":return n.stop()}}),n)})))(),h({type:d.UPDATE_DEVICES_ID,payload:{type:"camera",id:N}}),h({type:d.UPDATE_DEVICES_ID,payload:{type:"microphone",id:y}}),function(){e=null,t=null,clearInterval(b),null==D||D.close(),null==P||P.close()}}),[y,N]);var W=function(){h({type:d.UPDATE_PERMISSION_STATE,payload:"complete"}),h({type:d.UPDATE_STATUS,payload:"will-join"}),null==D||D.close(),null==P||P.close()};(0,i.useImperativeHandle)(t,(function(){return{join:function(){W()}}}));return i.createElement(r.default,null,i.createElement("div",{className:"modal"},i.createElement("div",null,i.createElement("h3",{className:"title"},"Privoce Daily Meeting"),"allow"===j&&i.createElement("div",{className:"playerWrap"},i.createElement(s.default,{videoTrack:P,audioTrack:null}),i.createElement("div",{className:"buttons"},i.createElement(m.default,{onClick:function(){return h({type:d.UPDATE_DEVICES_ENABLED,payload:{devices:"video",enabled:!B}})},type:"cam",label:null,disabled:!B}),i.createElement(m.default,{onClick:function(){return h({type:d.UPDATE_DEVICES_ENABLED,payload:{devices:"audio",enabled:!O}})},label:null,volumeLevel:L,disabled:!O}))),function(e){return void 0===e&&(e=[]),e.length?i.createElement(i.Fragment,null,i.createElement(c.default,{value:N,icon:i.createElement(u.Camera,null),data:e.filter((function(e){return"videoinput"===e.kind})),onChange:function(e){_(e)}}),i.createElement("div",{className:"space"}),i.createElement(c.default,{value:y,icon:i.createElement(u.Mic,null),data:e.filter((function(e){return"audioinput"===e.kind})),onChange:function(e){w(e)}}),i.createElement("div",{className:"space"}),i.createElement(c.default,{value:S,icon:i.createElement(u.Speaker,null),data:e.filter((function(e){return"audiooutput"===e.kind})),onChange:function(e){C(e)}})):null}(l),i.createElement("div",{className:"statusText"},"allow"===j?"In order for others to hear you, your browser will request microphone access.":"We donâ€™t have access to your Microphone and Mic."),i.createElement("div",{className:"descText"},"Warning: Voice only works in one tab, Make sure do not close the tab you started Voice with, once you close the tab, you have to restart again.")),i.createElement("div",null,"allow"===j?i.createElement("button",{className:"button",onClick:W},"Join Meeting"):i.createElement("button",{className:"button",onClick:f},"Request access"))))};t.default=(0,i.forwardRef)(f)},4778:function(e,t,n){n.r(t);var a=n(3806).default.section.withConfig({displayName:"styles__StyledDevices",componentId:"sc-tn8d7h-0"})(["width:100vw;height:100vh;background:#fff;display:flex;align-items:center;justify-content:center;.modal{display:flex;flex-direction:column;justify-content:space-between;padding:32px 16px;box-sizing:border-box;width:412px;min-height:462px;box-shadow:0px 4px 14px 2px rgba(0,0,0,0.16);border-radius:8px;}.title{font-size:20px;color:rgba(68,73,79,1);line-height:30px;text-align:center;margin-bottom:32px;}.space{height:8px;}.statusText{margin:32px 0 8px;text-align:center;word-break:break-all;font-size:16px;color:rgba(68,73,79,1);line-height:24px;}.descText{text-align:center;word-break:break-all;font-size:12px;color:rgba(92,96,101,1);line-height:18px;}.button{display:block;width:150px;height:32px;border:none;background-color:rgba(82,237,255,1);color:rgba(25,24,29,1);margin:32px auto 0;border-radius:50px;cursor:pointer;}.playerWrap{position:relative;height:240px;margin:0 -16px;background-color:rgba(25,24,29,1);margin-bottom:16px;.player{width:100%;height:240px;}.buttons{position:absolute;left:50%;transform:translateX(-50%);bottom:16px;display:flex;}}"]);t.default=a},7707:function(e,t,n){n.r(t);var a=n(9390),l=n(7294),o=n(3806).default.div.withConfig({displayName:"Button__StyledButton",componentId:"sc-152vati-0"})([".button{border:none;background:none !important;cursor:pointer;margin:0 !important;width:auto !important;height:auto !important;&:disabled{opacity:0.3;}&Icon{position:relative;width:48px;height:48px;background-color:#f26b4d;border-radius:12px;display:flex;align-items:center;justify-content:center;overflow:hidden;&:hover{background-color:#c35037;}}.text{color:#fff;font-size:14px;margin-top:10px;text-align:center;}&Inner{}.level{transition:height 0.3s;position:absolute;left:0;bottom:0;width:100%;height:0;background-color:rgba(0,0,0,.35);}}"]),i=new Map([["mic",[l.createElement(a.Audio,null),l.createElement(a.AudioClose,null)]],["cam",[l.createElement(a.Video,null),l.createElement(a.VideoClose,null)]]]);new Map([["mic","Mic"],["cam","Cam"]]);t.default=function(e){var t,n=e.onClick,a=void 0===n?function(){}:n,r=e.label,c=void 0===r||r,u=e.disabled,d=void 0!==u&&u,s=e.volumeLevel,p=void 0===s?0:s,v=e.type,m=void 0===v?"mic":v;return l.createElement(o,null,l.createElement("button",{onClick:a,className:"button"},l.createElement("div",{className:"buttonInner"},l.createElement("div",{className:"buttonIcon"},null===(t=i.get(m))||void 0===t?void 0:t[d?1:0],l.createElement("span",{style:{height:100*p+"px"},className:"level"})),c&&l.createElement("div",{className:"text"},m.replace(m[0],m[0].toUpperCase())))))}},9742:function(e,t,n){n.r(t);var a=n(7294),l=n(77),o=n(1903);t.default=function(){return a.createElement(l.default,null,a.createElement(o.default,null))}}}]);
//# sourceMappingURL=component---src-pages-voice-index-js-3eb481f3f5f721bcfef6.js.map