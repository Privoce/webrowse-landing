"use strict";(self.webpackChunkwebrowse_landing=self.webpackChunkwebrowse_landing||[]).push([[5260,7248],{6768:function(e,t,n){n.r(t);var a=n(7294),l=n(9),o=n(3003),i=l.default.div.withConfig({displayName:"Selector__StyledSelector",componentId:"sc-8ljg19-0"})([".selector{width:380px;padding:0 12px;box-sizing:border-box;border:1px solid rgba(208,213,221,1);border-radius:8px;display:flex;align-items:center;}.icon{}.selectMain{position:relative;width:100%;flex:1;margin:0 6px;}.select{width:100%;height:44px;opacity:0;cursor:pointer;}.value{position:absolute;line-height:44px;font-size:16px;color:rgba(52,64,84,1);}"]);t.default=function(e){var t,n=e.icon,l=void 0===n?null:n,r=e.data,c=void 0===r?[]:r,d=e.value,u=void 0===d?"default":d,s=e.onChange,p=void 0===s?function(){}:s;return a.createElement(i,null,a.createElement("div",{className:"selector"},l,a.createElement("div",{className:"selectMain"},a.createElement("div",{className:"value"},a.createElement("span",{className:"textLineClamp-1"},null===(t=c.find((function(e){return e.deviceId===u})))||void 0===t?void 0:t.label)),a.createElement("select",{className:"select",onChange:function(e){console.log(e.target.value,"ev"),p(e.target.value)}},null==c?void 0:c.map((function(e){return a.createElement("option",{key:e.deviceId,value:e.deviceId},e.label)})))),a.createElement(o.DropDown,null)))}},7539:function(e,t,n){n.r(t);var a=n(8634),l=n(2656),o=n.n(l),i=n(7294),r=n(5478),c=n(6768),d=n(3003),u=n(9287),s=n(5728),p=n(6963),m=n.n(p),v=n(5473);t.default=function(e){var t=e.devices,n=void 0===t?[]:t,l=e.access,p=void 0===l?function(){}:l,f=(0,i.useRef)(null),b=(0,i.useContext)(u.VoiceContext),g=b.state,h=b.dispatch,x=(0,i.useState)(""),E=x[0],y=x[1],w=(0,i.useState)(""),k=w[0],C=w[1],I=(0,i.useState)(""),N=I[0],S=I[1],_=(0,i.useState)(null),D=_[0],T=_[1],A=(0,i.useState)(null),M=A[0],V=A[1],P=(0,i.useState)(0),U=P[0],z=P[1],L=null==g?void 0:g.permissionState,j=g||{},B=j.videoEnabled,W=j.audioEnabled;(0,i.useEffect)((function(){var e,t,a,l=null===(e=n.find((function(e){return"audioinput"===e.kind})))||void 0===e?void 0:e.deviceId;y(l);var o=null===(t=n.find((function(e){return"audioinput"===e.kind})))||void 0===t?void 0:t.deviceId;C(o);var i=null===(a=n.find((function(e){return"videoinput"===e.kind})))||void 0===a?void 0:a.deviceId;S(i)}),[n]),(0,i.useEffect)((function(){var e,t;if(E&&N)return(0,a.Z)(o().mark((function n(){var a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m().createMicrophoneAndCameraTracks({microphoneId:E},{cameraId:N});case 2:a=n.sent,e=a[0],t=a[1],T(e),V(t),f=setInterval((function(){var t,n=null===(t=e)||void 0===t?void 0:t.getVolumeLevel();console.log("local stream audio level",n),z(n)}),200);case 8:case"end":return n.stop()}}),n)})))(),h({type:u.UPDATE_DEVICES_ID,payload:{type:"camera",id:N}}),h({type:u.UPDATE_DEVICES_ID,payload:{type:"microphone",id:E}}),function(){e=null,t=null,clearInterval(f),null==D||D.close(),null==M||M.close()}}),[E,N]);console.log(L,"permissionStatus");return i.createElement(r.default,null,i.createElement("div",{className:"modal"},i.createElement("div",null,i.createElement("h3",{className:"title"},"Privoce Daily Meeting"),"allow"===L&&i.createElement("div",{className:"playerWrap"},i.createElement(s.default,{videoTrack:M,audioTrack:null}),i.createElement("div",{className:"buttons"},i.createElement(v.default,{onClick:function(){return h({type:u.UPDATE_DEVICES_ENABLED,payload:{devices:"video",enabled:!B}})},type:"cam",label:null,disabled:!B}),i.createElement(v.default,{onClick:function(){return h({type:u.UPDATE_DEVICES_ENABLED,payload:{devices:"audio",enabled:!W}})},label:null,volumeLevel:U,disabled:!W}))),function(e){return void 0===e&&(e=[]),e.length?i.createElement(i.Fragment,null,i.createElement(c.default,{value:N,icon:i.createElement(d.Camera,null),data:e.filter((function(e){return"videoinput"===e.kind})),onChange:function(e){S(e)}}),i.createElement("div",{className:"space"}),i.createElement(c.default,{value:E,icon:i.createElement(d.Mic,null),data:e.filter((function(e){return"audioinput"===e.kind})),onChange:function(e){y(e)}}),i.createElement("div",{className:"space"}),i.createElement(c.default,{value:k,icon:i.createElement(d.Speaker,null),data:e.filter((function(e){return"audiooutput"===e.kind})),onChange:function(e){C(e)}})):null}(n),i.createElement("div",{className:"statusText"},"allow"===L?"In order for others to hear you, your browser will request microphone access.":"We donâ€™t have access to your Microphone and Mic."),i.createElement("div",{className:"descText"},"Warning: Voice only works in one tab, Make sure do not close the tab you started Voice with, once you close the tab, you have to restart again.")),i.createElement("div",null,"allow"===L?i.createElement("button",{className:"button",onClick:function(){h({type:u.UPDATE_PERMISSION_STATE,payload:"complete"}),h({type:u.UPDATE_STATUS,payload:"will-join"}),null==D||D.close(),null==M||M.close()}},"Join Meeting"):i.createElement("button",{className:"button",onClick:p},"Request access"))))}},5478:function(e,t,n){n.r(t);var a=n(9).default.section.withConfig({displayName:"styles__StyledDevices",componentId:"sc-tn8d7h-0"})(["width:100vw;height:100vh;background:#fff;display:flex;align-items:center;justify-content:center;.modal{display:flex;flex-direction:column;justify-content:space-between;padding:32px 16px;box-sizing:border-box;width:412px;min-height:462px;box-shadow:0px 4px 14px 2px rgba(0,0,0,0.16);border-radius:8px;}.title{font-size:20px;color:rgba(68,73,79,1);line-height:30px;text-align:center;margin-bottom:32px;}.space{height:8px;}.statusText{margin:32px 0 8px;text-align:center;word-break:break-all;font-size:16px;color:rgba(68,73,79,1);line-height:24px;}.descText{text-align:center;word-break:break-all;font-size:12px;color:rgba(92,96,101,1);line-height:18px;}.button{display:block;width:150px;height:32px;border:none;background-color:rgba(82,237,255,1);color:rgba(25,24,29,1);margin:32px auto 0;border-radius:50px;cursor:pointer;}.playerWrap{position:relative;height:240px;margin:0 -16px;background-color:rgba(25,24,29,1);margin-bottom:16px;.player{width:100%;height:240px;}.buttons{position:absolute;left:50%;transform:translateX(-50%);bottom:16px;display:flex;}}"]);t.default=a},5473:function(e,t,n){n.r(t);var a=n(3003),l=n(7294),o=n(9).default.div.withConfig({displayName:"Button__StyledButton",componentId:"sc-152vati-0"})([".button{border:none;background:none !important;cursor:pointer;margin:0 !important;width:auto !important;height:auto !important;&:disabled{opacity:0.3;}&Icon{position:relative;width:48px;height:48px;background-color:#f26b4d;border-radius:12px;display:flex;align-items:center;justify-content:center;overflow:hidden;&:hover{background-color:#c35037;}}.text{color:#fff;font-size:14px;margin-top:10px;text-align:center;}&Inner{}.level{transition:height 0.3s;position:absolute;left:0;bottom:0;width:100%;height:0;background-color:rgba(0,0,0,.35);}}"]),i=new Map([["mic",[l.createElement(a.Audio,null),l.createElement(a.AudioClose,null)]],["cam",[l.createElement(a.Video,null),l.createElement(a.VideoClose,null)]]]);new Map([["mic","Mic"],["cam","Cam"]]);t.default=function(e){var t,n=e.onClick,a=void 0===n?function(){}:n,r=e.label,c=void 0===r||r,d=e.disabled,u=void 0!==d&&d,s=e.volumeLevel,p=void 0===s?0:s,m=e.type,v=void 0===m?"mic":m;return l.createElement(o,null,l.createElement("button",{onClick:a,className:"button"},l.createElement("div",{className:"buttonInner"},l.createElement("div",{className:"buttonIcon"},null===(t=i.get(v))||void 0===t?void 0:t[u?1:0],l.createElement("span",{style:{height:100*p+"px"},className:"level"})),c&&l.createElement("div",{className:"text"},v.replace(v[0],v[0].toUpperCase())))))}}}]);
//# sourceMappingURL=component---src-pages-voice-components-devices-index-js-d45eeec029731d6539d5.js.map